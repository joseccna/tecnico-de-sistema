<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="TaskDeskNew.MainPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    BackgroundColor="#0F172A">

    <ContentPage.Padding>
        <Thickness>24</Thickness>
    </ContentPage.Padding>

    <Grid RowDefinitions="Auto, Auto, *" RowSpacing="16">

        <VerticalStackLayout Grid.Row="0" Spacing="4">
            <Label
                Text="TaskDesk 1.1"
                FontSize="28"
                FontAttributes="Bold"
                TextColor="White" />

            <Label
                x:Name="SubtitleLabel"
                Text="Organize suas tarefas do dia a dia"
                FontSize="14"
                TextColor="#94A3B8" />
        </VerticalStackLayout>

        <Frame
            Grid.Row="1"
            CornerRadius="16"
            Padding="12"
            HasShadow="True"
            BackgroundColor="#1E293B">

            <Grid ColumnDefinitions="*, Auto" VerticalOptions="Center">
                <VerticalStackLayout Spacing="2">
                    <Label
                        Text="Resumo das tarefas"
                        FontSize="14"
                        FontAttributes="Bold"
                        TextColor="White" />

                    <Label
                        x:Name="SummaryLabel"
                        Text="Você ainda não cadastrou nenhuma tarefa."
                        FontSize="12"
                        TextColor="#CBD5F5" />
                </VerticalStackLayout>

                <VerticalStackLayout
                    Grid.Column="1"
                    HorizontalOptions="End"
                    Spacing="2"
                    VerticalOptions="Center">

                    <Label
                        x:Name="TotalTasksLabel"
                        Text="0"
                        FontSize="20"
                        FontAttributes="Bold"
                        HorizontalTextAlignment="End"
                        TextColor="#38BDF8" />

                    <Label
                        Text="tarefas criadas"
                        FontSize="11"
                        TextColor="#64748B"
                        HorizontalTextAlignment="End" />
                </VerticalStackLayout>
            </Grid>
        </Frame>

        <Grid Grid.Row="2" RowDefinitions="Auto, *" RowSpacing="16">

            <Frame
                Grid.Row="0"
                CornerRadius="16"
                Padding="16"
                HasShadow="True"
                BackgroundColor="#020617">

                <VerticalStackLayout Spacing="10">
                    <Label
                        Text="Nova tarefa"
                        FontSize="16"
                        FontAttributes="Bold"
                        TextColor="White" />

                    <Entry
                        x:Name="TitleEntry"
                        Placeholder="Título da tarefa"
                        FontSize="14"
                        TextColor="White"
                        PlaceholderColor="#6B7280"
                        BackgroundColor="#020617" />

                    <Editor
                        x:Name="DescriptionEditor"
                        AutoSize="TextChanges"
                        Placeholder="Descrição (opcional)"
                        FontSize="13"
                        TextColor="White"
                        PlaceholderColor="#6B7280"
                        BackgroundColor="#020617" />

                    <Grid ColumnDefinitions="*, Auto" ColumnSpacing="8">
                        <Picker
                            x:Name="PriorityPicker"
                            Title="Prioridade"
                            FontSize="13"
                            TextColor="White"
                            TitleColor="#6B7280"
                            BackgroundColor="#020617">
                            <Picker.Items>
                                <x:String>Baixa</x:String>
                                <x:String>Média</x:String>
                                <x:String>Alta</x:String>
                            </Picker.Items>
                        </Picker>

                        <Button
                            Grid.Column="1"
                            Text="Adicionar"
                            Clicked="OnAddTaskClicked"
                            FontAttributes="Bold"
                            Padding="14,8"
                            CornerRadius="999"
                            BackgroundColor="#38BDF8"
                            TextColor="#020617" />
                    </Grid>
                </VerticalStackLayout>
            </Frame>

            <Frame
                Grid.Row="1"
                CornerRadius="16"
                Padding="0"
                HasShadow="True"
                BackgroundColor="#020617">

                <CollectionView
                    x:Name="TasksCollectionView"
                    ItemsSource="{Binding Tasks}"
                    SelectionMode="None">

                    <CollectionView.EmptyView>
                        <VerticalStackLayout
                            Padding="24"
                            Spacing="8"
                            HorizontalOptions="Center"
                            VerticalOptions="Center">

                            <Label
                                Text="Nenhuma tarefa cadastrada ainda."
                                FontSize="14"
                                TextColor="#9CA3AF"
                                HorizontalTextAlignment="Center" />

                            <Label
                                Text="Comece adicionando uma tarefa no formulário acima."
                                FontSize="12"
                                TextColor="#6B7280"
                                HorizontalTextAlignment="Center" />
                        </VerticalStackLayout>
                    </CollectionView.EmptyView>

                    <CollectionView.ItemTemplate>
                        <DataTemplate>
                            <Frame
                                Margin="12,6"
                                Padding="12"
                                CornerRadius="12"
                                HasShadow="False"
                                BackgroundColor="#020617"
                                BorderColor="#1E293B">

                                <Grid RowDefinitions="Auto, Auto, Auto" RowSpacing="4">
                                    <Label
                                        Text="{Binding Title}"
                                        FontSize="15"
                                        FontAttributes="Bold"
                                        TextColor="White" />

                                    <Label
                                        Grid.Row="1"
                                        Text="{Binding Description}"
                                        FontSize="13"
                                        TextColor="#E5E7EB" />

                                    <Grid
                                        Grid.Row="2"
                                        ColumnDefinitions="Auto, *, Auto, Auto"
                                        ColumnSpacing="8"
                                        VerticalOptions="Center">

                                        <Label
                                            Grid.Column="0"
                                            Text="{Binding Prioridade}"
                                            FontSize="12"
                                            TextColor="#FCD34D" />

                                        <Label
                                            Grid.Column="1"
                                            Text="{Binding CreatedAt, StringFormat='Criada em {0:dd/MM HH:mm}'}"
                                            FontSize="11"
                                            TextColor="#6B7280"
                                            HorizontalOptions="Start" />

                                        <Button
                                            Grid.Column="2"
                                            Text="Concluir"
                                            FontSize="11"
                                            Padding="10,4"
                                            CornerRadius="999"
                                            BackgroundColor="#22C55E"
                                            TextColor="#022C22"
                                            Clicked="OnCompleteTaskClicked" />

                                        <Button
                                            Grid.Column="3"
                                            Text="Excluir"
                                            FontSize="11"
                                            Padding="10,4"
                                            CornerRadius="999"
                                            BackgroundColor="#EF4444"
                                            TextColor="#FEF2F2"
                                            Clicked="OnDeleteTaskClicked" />
                                    </Grid>
                                </Grid>
                            </Frame>
                        </DataTemplate>
                    </CollectionView.ItemTemplate>
                </CollectionView>
            </Frame>
        </Grid>
    </Grid>
</ContentPage>
